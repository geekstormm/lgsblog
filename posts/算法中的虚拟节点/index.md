# 虚拟节点的用处


&lt;!--more--&gt;


## 虚拟节点的用处

### 1. 链表操作

- 删除链表 在删除链表节点时，特别是删除头节点，通常需要对头节点进行特殊处理。引入一个虚拟头节点，可以统一删除节点的操作逻辑，无需特判头节点。例如：
```C&#43;&#43;
ListNode* dummy = new ListNode(0);
dummy-&gt;next = head;
ListNode* current = dummy;
while (current-&gt;next != nullptr) {
    if (current-&gt;next-&gt;val == value) {
        current-&gt;next = current-&gt;next-&gt;next;
        break;
    }
    current = current-&gt;next;
}
return dummy-&gt;next;
```
- 合并链表, 在合并两个有序链表时，使用虚拟头节点可以避免初始化第一个节点的特殊处理。

### 2. 树操作
- 层序遍历, 在二叉树的层序遍历中，使用虚拟节点（如在每层之间加入一个特殊的 null 节点）可以方便区分不同的层级，简化层级分隔的处理。
- 构建环形链表, 在处理一些树或者图结构时，引入一个虚拟根节点可以将非平衡的树结构转换为更容易处理的形式，尤其是在做序列化、反序列化或者复杂遍历时。

### 3. DP中的状态转移
- 状态初始化：在一些动态规划问题中（如背包问题、最短路径问题），引入虚拟节点或状态可以统一处理初始状态与一般状态的转移，避免对初始条件的特殊处理。
- 二维动态规划：如之前的例子，虚拟节点可以用来简化动态规划中的边界条件处理，使得状态转移方程更为统一和简洁。

### 4.图算法：
- 最短路径：在计算多个节点的最短路径时，可以引入一个虚拟源节点，连接所有原始节点，来简化处理每个节点的初始路径计算。
- 拓扑排序：在拓扑排序中，引入虚拟节点可以方便处理那些没有入度的节点，统一处理初始条件。

### 5.字符串匹配：
- KMP算法：在KMP字符串匹配算法中，引入虚拟节点可以用于简化前缀表（失败函数）的初始化处理，使得主串与模式串的匹配过程更加顺畅。

### 6.其他场景：
- 多源汇流问题：在流网络中，可以通过添加虚拟源点或汇点来将多源或多汇问题转换为单源单汇问题，从而简化算法设计。

---

> 作者: [LGS](https://github.com/geekstormm)  
> URL: https://geekstormm.github.io/posts/%E7%AE%97%E6%B3%95%E4%B8%AD%E7%9A%84%E8%99%9A%E6%8B%9F%E8%8A%82%E7%82%B9/  

